MacPorts

https://www.macports.org/install.php

Quickstart
Install Apple's Command Line Developer Tools: xcode-select --install
Install MacPorts for your version of the Mac operating system:
macOS Tahoe v26
macOS Sequoia v15
macOS Sonoma v14
macOS Ventura v13
Older OS? See here.

$ sudo port install coreutils
$ sudo port install findutils
$ sudo port install libgit2
$ sudo port install qt5

==========================================================================
$ sudo port install qt6

==========================================================================
Anaconda3

Anaconda3-2025.06-0-MacOSX-arm64.pkg

Last login: Sun Oct 12 06:46:45 on ttys000
(base) MacMini{sekigawa} ~ (153)% which python3
/opt/anaconda3/bin/python3
(base) MacMini{sekigawa} ~ (154)% python3
Python 3.13.5 | packaged by Anaconda, Inc. | (main, Jun 12 2025, 11:23:37) [Clang 14.0.6 ] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>

(base) MacMini{sekigawa} bin (168)% conda search ruby
2 channel Terms of Service accepted
Loading channels: done
# Name                       Version           Build  Channel
ruby                           2.5.1      hacf69a2_0  pkgs/main
ruby                           3.1.2      hc19afb0_0  pkgs/main
ruby                           3.1.2      hd6dd3be_1  pkgs/main
ruby                           3.1.4      h136664f_0  pkgs/main
ruby                           3.2.2      h62f6fdd_0  pkgs/main
(base) MacMini{sekigawa} bin (169)% conda search libgit2
2 channel Terms of Service accepted
Loading channels: done
# Name                       Version           Build  Channel
libgit2                        1.0.1      h95c9599_0  pkgs/main
libgit2                        1.5.0      h98b2900_0  pkgs/main
libgit2                        1.6.4      h514c7bf_0  pkgs/main


# Qt5 bundled with anaconda3 installed under /opt/anaconda3/
#   using "Anaconda3-2025.06-0-MacOSX-arm64.pkg", then
#
#   1) Create a new env "klayout-qt5" (with stable solver & channels)
#      switch solver to libmamba for faster/more stable resolves
#        $ conda install -n base -y conda-libmamba-solver
#        $ conda config --set solver libmamba
#
#      Create the environment (on this ARM machine it will pull osx-arm64 builds)
#        $ conda create -n klayout-qt5 python=3.13 -y
#        $ conda activate klayout-qt5
#
#      In this env only, prefer conda-forge strictly (to avoid mixing)
#        $ conda config --env --add channels conda-forge
#        $ conda config --env --add channels defaults
#        $ conda config --env --set channel_priority strict
#        $ conda install -n base -y conda-libmamba-solver
#        $ conda config --set solver libmamba
#
#   2) Install Qt5 (qt-main) from conda-forge only
#      Qt5 core (builds that typically include Designer/UiTools)
#        $ conda install -y --override-channels -c conda-forge "qt-main=5.15.15"
#
# [Key Type Name] = 'Qt5Ana3'
Ana3Env = '/opt/anaconda3/opt/anaconda3/envs/klayout-qt5'
Qt5Ana3 = { 'qmake' : '%s/bin/qmake' % Ana3Env,
            'deploy': '%s/bin/macdeployqt' % Ana3Env,
            'libdir': '%s/lib' % Ana3Env
          }

In the virtual env.
$ conda install ruby=3.2.2
$ conda install libgit2=1.6.4


Patching...

(klayout-qt5) MacMini{sekigawa} common (295)% pwd
/opt/anaconda3/envs/klayout-qt5/mkspecs/common
(klayout-qt5) MacMini{sekigawa} common (299)% diff mac.conf*
33c33
< QMAKE_LIBS_OPENGL       = -framework OpenGL
---
> QMAKE_LIBS_OPENGL       = -framework OpenGL -framework AGL

(klayout-qt5) MacMini{sekigawa} modules (330)% pwd
/opt/anaconda3/envs/klayout-qt5/mkspecs/modules
(klayout-qt5) MacMini{sekigawa} modules (331)% diff qt_lib_gui_private.pri*
12c12
< QMAKE_INCDIR_OPENGL = /System/Library/Frameworks/OpenGL.framework/Headers
---
> QMAKE_INCDIR_OPENGL = /System/Library/Frameworks/OpenGL.framework/Headers /System/Library/Frameworks/AGL.framework/Headers/
15c15
< QMAKE_LIBS_OPENGL = -framework OpenGL
---
> QMAKE_LIBS_OPENGL = -framework OpenGL -framework AGL



# Qt6 bundled with anaconda3 installed under /opt/anaconda3/
#   using "Anaconda3-2025.06-0-MacOSX-arm64.pkg", then
#
#   1) Create a new env "klayout-qt5" (with stable solver & channels)
#      switch solver to libmamba for faster/more stable resolves
#        $ conda install -n base -y conda-libmamba-solver
#        $ conda config --set solver libmamba
#
#      Create the environment (on this ARM machine it will pull osx-arm64 builds)
#        $ conda create -n klayout-qt5 python=3.13 -y
#        $ conda activate klayout-qt5
#
#      In this env only, prefer conda-forge strictly (to avoid mixing)
#        $ conda config --env --add channels conda-forge
#        $ conda config --env --add channels defaults
#        $ conda config --env --set channel_priority strict
#        $ conda install -n base -y conda-libmamba-solver
#        $ conda config --set solver libmamba
#
#   2) Install Qt5 (qt-main) from conda-forge only
#      Qt5 core (builds that typically include Designer/UiTools)
#        $ conda install -y --override-channels -c conda-forge "qt6-main=6.9.3"
#        $ conda install -y --override-channels -c conda-forge "qt6-multimedia=6.9.3"


 $ conda install -y --override-channels -c conda-forge "ruby=3.2.2"
 $ conda install -y --override-channels -c conda-forge "libgit2=1.9.1"


#